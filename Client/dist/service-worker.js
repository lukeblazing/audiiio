self.addEventListener("install",(t=>{t.waitUntil(self.skipWaiting().catch((t=>console.error("Service worker install error:",t))))})),self.addEventListener("fetch",(t=>{"GET"===t.request.method?t.respondWith(fetch(t.request).catch((e=>(console.error("Fetch error:",e),fetch(t.request))))):t.respondWith(fetch(t.request))})),self.addEventListener("activate",(t=>{t.waitUntil(self.clients.claim().catch((t=>console.error("Activation error:",t))))})),self.addEventListener("push",(t=>{let e={};if(t.data)try{e=t.data.json()}catch(i){e={body:t.data.text()}}const i=e.title||"New Notification",n={body:e.body||"You have a new message!",icon:e.icon||"/icon.png",badge:e.badge||"/badge.png",data:{url:e.url||"/"}};t.waitUntil(self.registration.showNotification(i,n))})),self.addEventListener("notificationclick",(t=>{t.notification.close(),t.waitUntil(clients.matchAll({type:"window",includeUncontrolled:!0}).then((e=>{for(const i of e)if(i.url===t.notification.data.url&&"focus"in i)return i.focus();if(clients.openWindow)return clients.openWindow(t.notification.data.url)})))}));